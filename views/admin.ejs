<%- include("header.ejs") %>
<div class="bg-warning mb-5">
  <div class="container">
    <div class="row">
      <div
        class="options p-4 d-flex justify-content-between align-items-center col-sm-12 col-md-12 col-lg-12"
      >
        <div class="home">
          <a class="link-underline link-underline-opacity-0 text-dark" href="/"
            >HOME</a
          >
        </div>
        <div class="rightside gap-3 d-flex align-items-center">
          <div
            class="add hovers col-2 border shadow rounded-4 d-flex justify-content-center align-items-center"
            style="width: 3rem; height: 3rem; transition: opacity 0.2s"
          >
            <a href="/add"
              ><i
                class="bi bi-plus-circle-fill"
                style="font-size: 2rem; color: #198754"
              ></i
            ></a>
          </div>
          <div class="dropdown">
            <button
              class="btn btn-secondary dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              FILTER
            </button>
            <ul class="dropdown-menu dropdown-menu-dark">
              <li>
                <a class="dropdown-item" href="/admin?filter=date">DATE</a>
              </li>
              <li>
                <a class="dropdown-item" href="/admin?filter=rating">RATING</a>
              </li>
              <li>
                <a class="dropdown-item" href="/admin?filter=name">NAME</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row g-4">
    <% if(book.length>0){ %> <% book.forEach((item)=>{ %>
    <div class="review col-sm-12 col-md-12 col-lg-6">
      <div class="p-3 border rounded shadow-sm">
        <h2 class="px-2"><%= item.book_title %></h2>
        <div class="image-sumry p-2 clearfix">
          <img
            src="<%= item.book_image_url %>"
            alt=""
            class="rounded float-start me-3 mb-2"
          />
          <p><%= item.short_summary %></p>
        </div>
        <div class="rating px-2">
          <p class="mb-0">
            <% const stars = item.rating; %> <% const unblow = 5-stars; %>
            Rating: <% for (let i=0; i < stars; i++) {%>
            <i class="bi bi-star-fill text-warning"></i>
            <% } %> <% for (let i=0; i < unblow; i++) {%>
            <i class="bi bi-star text-warning"></i>
            <% } %>
          </p>
        </div>
        <div class="details p-2 pb-0 d-flex justify-content-between">
          <div class="book-detail">
            <p class="mb-0">Author of book: <%= item.author_name %></p>
            <p class="mb-0">Posted on: <%= item.posted_day %></p>
          </div>
          <div class="more d-flex align-items-end">
            <form action="/books/<%= item.id %>" method="GET">
              <button type="submit" class="btn text-primary mb-0 p-0">
                read more
              </button>
            </form>
          </div>
        </div>
        <div class="buttons d-flex justify-content-center align-items-center">
          <div
            class="edit m-2 mb-0 hovers col-2 border shadow rounded-4 d-flex justify-content-center align-items-center"
            style="width: 3rem; height: 3rem; transition: opacity 0.2s"
          >
            <a href="/edit/<%= item.id %>"
              ><i
                class="bi bi-pencil-fill"
                style="font-size: 2rem; color: #0d6efd"
              ></i
            ></a>
          </div>
          <div
            class="delete m-2 mb-0 hovers col-2 border shadow rounded-4 d-flex justify-content-center align-items-center"
            style="width: 3rem; height: 3rem; transition: opacity 0.2s"
          >
            <a href="/delete/<%= item.id %>"
              ><i
                class="bi bi-trash3-fill"
                style="font-size: 2rem; color: #dc3545"
              ></i
            ></a>
          </div>
        </div>
      </div>
    </div>
    <%}) %> <% } %>
  </div>
</div>

<%- include("footer.ejs") %>
